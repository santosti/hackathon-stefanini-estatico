function PessoaListarController(a,b,c,d,e,f,g){vm=this,vm.qdePorPagina=5,vm.ultimoIndex=0,vm.contador=0,vm.url="http://localhost:8080/treinamento/api/pessoas/",vm.urlEndereco="http://localhost:8080/treinamento/api/enderecos/",vm.urlPaginado="http://localhost:8080/treinamento/api/pessoas/paginado",vm.init=function(){g.listar(vm.url).then(function(a){void 0!==a.data&&(vm.listaPessoas=a.data),vm.listaPessoasMostrar=[];var b=vm.listaPessoas.length>vm.qdePorPagina?vm.qdePorPagina:vm.listaPessoas.length;vm.qdePaginacao=new Array(vm.listaPessoas.length%vm.qdePorPagina==0?vm.listaPessoas.length/vm.qdePorPagina:parseInt(vm.listaPessoas.length/vm.qdePorPagina)+1),vm.currentPage=1;for(var c=0;c<b;c++)vm.listaPessoasMostrar.push(vm.listaPessoas[c]),vm.ultimoIndex++;vm.listaPessoasMostrar.sort(function(a,b){return a.id-b.id}),g.listar(vm.urlEndereco).then(function(a){void 0!==a.data&&(vm.listaEndereco=a.data)})})},vm.atualizarPaginacao=function(a){a>=vm.currentPage?vm.avancarPaginanacao(a):vm.retrocederPaginanacao(a)},vm.avancarPaginanacao=function(a){vm.listaPessoasMostrar=[],vm.currentPage++;for(var b=angular.copy(vm.ultimoIndex),c=vm.listaPessoas.length-vm.qdePorPagina,d=c>vm.qdePorPagina?vm.qdePorPagina:c;d>0;d--)vm.listaPessoasMostrar.push(vm.listaPessoas[b++]),vm.ultimoIndex++,vm.contador++;vm.listaPessoasMostrar.sort(function(a,b){return a.id-b.id})},vm.retrocederPaginanacao=function(a){vm.listaPessoasMostrar=[],vm.currentPage--;var b=vm.contador-1;vm.ultimoIndex=b+1;for(var c=vm.qdePorPagina;c>0;c--)vm.listaPessoasMostrar.push(vm.listaPessoas[b--]),vm.contador--;vm.listaPessoasMostrar.sort(function(a,b){return a.id-b.id})},vm.editar=function(a){void 0!==a?c.path("EditarPessoas/"+a):c.path("cadastrarPessoa")},vm.remover=function(a){var b;if(void 0!==a.id){b=!0;var c=a.acao,a=a.id}else b=!0;angular.forEach(vm.listaEndereco,function(c,d){c.idPessoa===a&&(b=!1)});var e=d.defer();return b?g.excluir(vm.url+a).then(function(a){e.resolve(a.data),void 0===c&&vm.init()}):alert("Pessoa com Endereço vinculado, exclusão não permitida"),e.promise},vm.retornarTelaListagem=function(){c.path("listarPessoas")}}angular.module("hackaton-stefanini").controller("PessoaListarController",PessoaListarController),PessoaListarController.$inject=["$rootScope","$scope","$location","$q","$filter","$routeParams","HackatonStefaniniService"];